
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>1.8 代码问题讨论记录 - Postweb相关资料</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Postweb相关资料" class="md-header__button md-logo" aria-label="Postweb相关资料" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Postweb相关资料
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.8 代码问题讨论记录
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Postweb相关资料" class="md-nav__button md-logo" aria-label="Postweb相关资料" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Postweb相关资料
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          1、系统开发手册
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="1、系统开发手册" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          1、系统开发手册
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.1%20%E5%9F%BA%E7%A1%80%E7%90%86%E8%AE%BA/" class="md-nav__link">
        1.1 基础理论
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.2%20%E5%88%9D%E6%AD%A5%E5%8A%A8%E6%89%8B%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
        1.2 初步动手实践
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.3%20Torchserve%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        1.3 Torchserve使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.4%20%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3/" class="md-nav__link">
        1.4 如何添加接口
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.5%20%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%E9%83%A8%E5%88%86/" class="md-nav__link">
        1.5 前后端交互部分
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.6%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" class="md-nav__link">
        1.6 消息队列
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1.7%20RocketMQ/" class="md-nav__link">
        1.7 RocketMQ
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          1.8 代码问题讨论记录
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        1.8 代码问题讨论记录
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-api" class="md-nav__link">
    1. 地图api
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2.分页问题
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.前后端交流需要加密处理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4nginx" class="md-nav__link">
    4.Nginx查看服务器运行状态
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5.用来测试的地方
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6torchserve" class="md-nav__link">
    6.torchserve 代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    7. 单元测试
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    8.目前需要做的事情
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9dockerrocketmq" class="md-nav__link">
    9.docker上运行rocketmq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-torchserve" class="md-nav__link">
    10. 运行torchserve命令
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-torchserve" class="md-nav__link">
    11. 注册torchserve网络模型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-docker" class="md-nav__link">
    12. 以docker形式重新部署前端代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    13.新服务器部署时的运行问题
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14docker" class="md-nav__link">
    14.docker启动服务并远程访问
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          2、系统部署手册
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="2、系统部署手册" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          2、系统部署手册
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2.1%20%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        2.1 系统部署相关知识
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2.2%20%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2%E6%89%8B%E5%86%8C/" class="md-nav__link">
        2.2 系统部署手册
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          3、系统使用手册
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3、系统使用手册" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          3、系统使用手册
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3.1%20%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2%E8%AF%B4%E6%98%8E/" class="md-nav__link">
        3.1 模型部署说明
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-api" class="md-nav__link">
    1. 地图api
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2.分页问题
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.前后端交流需要加密处理
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4nginx" class="md-nav__link">
    4.Nginx查看服务器运行状态
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5.用来测试的地方
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6torchserve" class="md-nav__link">
    6.torchserve 代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    7. 单元测试
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    8.目前需要做的事情
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9dockerrocketmq" class="md-nav__link">
    9.docker上运行rocketmq
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-torchserve" class="md-nav__link">
    10. 运行torchserve命令
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-torchserve" class="md-nav__link">
    11. 注册torchserve网络模型
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-docker" class="md-nav__link">
    12. 以docker形式重新部署前端代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    13.新服务器部署时的运行问题
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#14docker" class="md-nav__link">
    14.docker启动服务并远程访问
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>1.8 代码问题讨论记录</h1>

<h2 id="1-api">1. 地图api</h2>
<p>高德地图API操作：</p>
<p>https://lbs.amap.com/api/jsapi-v2/guide/services/autocomplete</p>
<p>https://lbs.amap.com/api/jsapi-v2/guide/services/autocomplete</p>
<h2 id="2">2.分页问题</h2>
<p>前端分页从1开始，后端分页从0开始，所以前端减一</p>
<p>mangodb的分页问题</p>
<h2 id="3">3.前后端交流需要加密处理</h2>
<p>如果有服务放在公网，底层服务放在另一个网站，需要通过http服务进行交流，则需要进行加密处理</p>
<p>加密处理： 时间戳 + ？？？ hd5加密</p>
<h2 id="4nginx">4.Nginx查看服务器运行状态</h2>
<pre><code class="language-bash">service nginx status
</code></pre>
<p>本系统中nginx服务的作用：</p>
<ul>
<li>前后端请求重定向</li>
</ul>
<p>nginx配置文件：</p>
<p>/etc/nginx/nginx.conf</p>
<h2 id="5">5.用来测试的地方</h2>
<ul>
<li>MySQL数据库的查询</li>
<li>数据处理进度</li>
</ul>
<h2 id="6torchserve">6.torchserve 代码</h2>
<p>模型位置：</p>
<pre><code>/data/MengQingqiang/postweb/serve/examples/image_classifier/greedy_time
</code></pre>
<p>torchserve 的debug 过程：</p>
<pre><code>docker ps
# 选择torchserve容器
docker logs 容器id -f

# 查看最后多少行
docker logs 容器id  -n 行数

</code></pre>
<p>torchserve 打包时注意采用pip 或者conda的方式安装，避免采用yum apt-get等方式绑定到系统python而非conda虚拟环境python </p>
<h2 id="7">7. 单元测试</h2>
<p>文件名必须以   _test   结尾，方法名必须 Test 开头</p>
<h2 id="8">8.目前需要做的事情</h2>
<p>流程：</p>
<ul>
<li>写一个模型</li>
<li>打包成mar形式</li>
</ul>
<h2 id="9dockerrocketmq">9.docker上运行rocketmq</h2>
<p>vm是我本地的虚拟机。。。。</p>
<p>运行nameserver</p>
<pre><code class="language-bash">docker run --name rmqnamesrv  -d \
-p 9876:9876 \
--privileged=true \
--restart=always \
-m 1g \
-v /home/vm/postweb/mq/namesrv/logs:/root/logs \
-v /home/vm/postweb/mq/namesrv/store:/root/store \
-e &quot;MAX_POSSIBLE_HEAP=100000000&quot; \
rocketmqinc/rocketmq sh mqnamesrv
</code></pre>
<p>运行broker</p>
<pre><code class="language-bash">docker run --name rmqbroker -d \
-p 10909:10909 \
-p 10911:10911 \
--privileged=true \
--restart=always \
-m 1g \
-v  /home/vm/postweb/mq/broker/logs:/root/logs \
-v  /home/vm/postweb/mq/broker/store:/root/store \
-v  /home/vm/postweb/mq/broker.conf:/opt/rocketmq-4.4.0/conf/broker.conf \
--link rmqnamesrv:namesrv \
-e &quot;NAMESRV_ADDR=namesrv:9876&quot; \
-e &quot;MAX_POSSIBLE_HEAP=200000000&quot; \
rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq-4.4.0/conf/broker.conf
</code></pre>
<p>运行 dashboard</p>
<pre><code class="language-bash">docker run -d --name rocketmq-dashboard -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=10.126.7.188:9876&quot; -p 8088:8080 -t apacherocketmq/rocketmq-dashboard
</code></pre>
<pre><code class="language-bash">docker run -d -p 10911:10911 -p 10909:10909 -v  /data/MengQingqiang/postweb/mq/broker/logs:/root/logs -v  /data/MengQingqiang/postweb/mq/broker/store:/root/store -v  /data/MengQingqiang/postweb/mq/broker.conf:/opt/rocketmq/conf/broker.conf --name rmqbroker --link rmqnamesrv:namesrv -e &quot;NAMESRV_ADDR=namesrv:9876&quot; -e &quot;MAX_POSSIBLE_HEAP=200000000&quot; rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq/conf/broker.conf
</code></pre>
<h2 id="10-torchserve">10. 运行torchserve命令</h2>
<p>第一次运行</p>
<pre><code>docker run -d --rm -it -p 6080:8080 -p 6081:8081 -p 6082:8082 -p 7070:7070 -p 7071:7071 --volume /home/vm/rpc/model_store:/tmp/models torchserver:v1.2.1 torchserve --start --model-store /tmp/models/ --no-config-snapshots
</code></pre>
<p>在本地虚拟机上运行：</p>
<pre><code>docker run --rm -it -p 6080:8080 -p 6081:8081 -p 6082:8082 -p 7070:7070 -p 7071:7071 --volume /home/vm/rpc/model_store:/tmp/models torchserver:v1.2.1 torchserve --start --model-store /tmp/models/ --models echo.mar --no-config-snapshots
</code></pre>
<h2 id="11-torchserve">11. 注册torchserve网络模型</h2>
<p>需要修改部署的docker容器与外部虚拟机共享同一个ip</p>
<h2 id="12-docker">12. 以docker形式重新部署前端代码</h2>
<p>例子：其他项目的dockerfile</p>
<pre><code class="language-bash"># 基础 image
FROM node

# 设置项目目录
WORKDIR /usr/src/app

# 安装项目依赖
COPY package*.json ./
RUN npm install

COPY . .
EXPOSE 8080

# 运行
CMD [ &quot;npm&quot;, &quot;run&quot;, &quot;serve&quot;]
</code></pre>
<p>参考网址：</p>
<pre><code>https://juejin.cn/post/7000579016147075079
</code></pre>
<p>问题： </p>
<p><strong>全局安装Vue CLI：npm install -g @vue/cli   失败！！！</strong></p>
<pre><code>解决办法步骤如下：
进入终端，依次输入一下命令
（1）创建global安装任务的目录
mkdir ~/.npm-global
（2）配置npm使用新的目录
npm config set prefix '~/.npm-global'
（3）在~/.profile文件中增加配置
export PATH=~/.npm-global/bin:$PATH
（4）配置文件立即生效
source ~/.profile
（5）重新执行命令
npm install -g xxxx 
npm install -g @vue/cli
</code></pre>
<p>创建.dockerignore文件</p>
<pre><code>node_modules
.git
.gitignore
复制代码
</code></pre>
<p>构建Docker image</p>
<pre><code>docker build -t postweb:dev .
</code></pre>
<p>运行</p>
<pre><code>docker run -v ${PWD}:/app -v /app/node_modules -p 8081:8080 postweb:dev
</code></pre>
<p>Tips:</p>
<p>1.docker run 创建一个基于postweb:dev镜像的容器并运行</p>
<p>2.<code>-v ${PWD}:/app</code> 挂载当前项目目录到容器内的/app文件夹</p>
<blockquote>
<p>windows用户可能不支持${PWD}，请使用绝对路径代替</p>
</blockquote>
<p>3.<code>-v /app/node_modules</code> 这个必要的，因为我们要用容器内的node_modules依赖，前面我们我们已经将项目目录<code>${PWD}:/app</code>挂载，所以我们要创建这个匿名卷，防止使用项目目录的node_modules。</p>
<p>4.<code>-p 8081:8080</code> 将容器内的8080映射到当前机器的8081</p>
<p>5.<code>-rm</code> 容器将在退出后删除</p>
<p>然后我们访问<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8081%2F">http://localhost:8081/</a> ，尝试修改src/App.vue中的代码。浏览器将会自动刷新，触发热重载。</p>
<h2 id="13">13.新服务器部署时的运行问题</h2>
<p><a href="https://www.cnblogs.com/manhelp/p/11277584.html">shell脚本执行错误 $'\r':command not found</a></p>
<p>解决办法：</p>
<pre><code class="language-bash">apt install dos2unix

dos2unix  脚本名
</code></pre>
<h2 id="14docker">14.docker启动服务并远程访问</h2>
<blockquote>
<p>MongoDB：</p>
<p>详细参考资料：</p>
<p>https://www.cnblogs.com/xinsen/p/10588767.html</p>
<p>然后导入MongoDB的集合</p>
<p>Redis：</p>
<p>参考资料</p>
<p>https://www.jianshu.com/p/607da9661079</p>
<p>MySQL：</p>
<p>参考资料</p>
<p>https://blog.csdn.net/weixin_42459563/article/details/80924634</p>
</blockquote>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../1.7%20RocketMQ/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 1.7 RocketMQ" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              1.7 RocketMQ
            </div>
          </div>
        </a>
      
      
        
        <a href="../2.1%20%E7%B3%BB%E7%BB%9F%E9%83%A8%E7%BD%B2%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/" class="md-footer__link md-footer__link--next" aria-label="Next: 2.1 系统部署相关知识" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              2.1 系统部署相关知识
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>